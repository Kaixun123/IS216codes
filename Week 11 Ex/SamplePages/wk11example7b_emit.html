<!DOCTYPE html>
<html>
<head>
    <title>Wk11 Example7b - Emit with payload</title>
    <!-- vue3 CDN -->
    <script src="https://unpkg.com/vue@next"></script>
</head>

<body>
    <div id = "app">
        <button-counter @reachtarget="onReachTarget"></button-counter>
    </div>

    <script>
        const app = Vue.createApp({
            methods: {
                onReachTarget(eventData) { // input param = data payload (counter)
                    console.log("target reached! count is " + eventData);
                    alert("target reached! count is " + eventData);
                }
            },            
        });

        app.component('button-counter', {
            data() {  // data option of the component
                return {
                    count: 0
                }
            },
            methods: {
                incrCount() {
                    this.count++;
                    if (this.count >= 3){
                        this.$emit('reachtarget', this.count); // (event, data payload). data payload is count value
                    }
                }
            },
            template: ` <div><p>If you like my page, click 
                        <button @click="incrCount()">Like</button></p>
                        <p>People liked me {{ count }} times.</p>
                        </div>`
        })

        const vm = app.mount('#app');
    </script>
</body>
</html>